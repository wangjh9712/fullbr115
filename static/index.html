<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fullbr115 Media</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/style.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        emby: { dark: '#141414', card: '#1f1f1f', accent: '#00a4dc', green: '#52b54b', red: '#e50914', gold: '#ffd700' }
                    },
                    animation: { 'fade-in': 'fadeIn 0.3s ease-in-out', 'slide-up': 'slideUp 0.3s ease-out' },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { transform: 'translateY(10px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 dark:bg-emby-dark text-gray-900 dark:text-gray-100 transition-colors duration-300 font-sans">

    <script type="text/x-template" id="tree-node-template">
        <div class="ml-0">
            <div class="flex items-center py-2 px-2 group transition-all cursor-pointer border-b border-gray-200 dark:border-gray-700/50"
                 :class="[
                     isISO ? 'iso-black-gold rounded my-1 border-0' : 'hover:bg-gray-50 dark:hover:bg-gray-700/50',
                     isRoot ? 'bg-gray-50 dark:bg-gray-800 rounded-t-lg' : ''
                 ]"
                 @click="toggle">
                
                <span v-if="item.is_dir && !isISO" class="mr-2 w-4 text-center text-gray-400 hover:text-emby-accent transition-transform duration-200"
                      :class="{'rotate-90': isOpen}">
                    <i class="fa-solid fa-caret-right"></i>
                </span>
                <span v-else class="mr-2 w-4"></span>
    
                <div class="mr-3 text-lg flex-shrink-0">
                    <i v-if="isISO" class="fa-solid fa-compact-disc iso-text-gold"></i>
                    <i v-else-if="item.is_dir" class="fa-solid text-yellow-500" 
                       :class="isOpen ? 'fa-folder-open' : 'fa-folder'"></i>
                    <i v-else class="fa-solid fa-file-video text-blue-400"></i>
                </div>
                
                <div class="flex-1 min-w-0 pr-4">
                    <div class="flex items-center flex-wrap gap-2">
                        <span class="truncate font-medium select-none text-sm" :class="isISO ? 'iso-text-gold' : ''">
                            {{ item.name }}
                        </span>
                        <div v-if="item.extraTags && item.extraTags.length" class="flex space-x-1">
                            <span v-for="tag in item.extraTags" :key="tag" 
                                  class="px-1.5 py-0.5 rounded text-[10px] bg-gray-200 dark:bg-gray-600/50 text-gray-600 dark:text-gray-300 border border-transparent"
                                  :class="isISO ? '!bg-yellow-900/30 !text-yellow-200 !border-yellow-600/30' : ''">
                                {{ tag }}
                            </span>
                        </div>
                    </div>
                </div>
    
                <span class="text-xs text-gray-500 dark:text-gray-400 mr-4 font-mono hidden sm:block whitespace-nowrap" :class="isISO ? '!text-gray-300' : ''">
                    {{ formatBytes(item.size) }}
                </span>
    
                <button @click.stop="onSave" 
                        class="p-2 rounded-full text-gray-400 hover:text-white hover:bg-emby-green transition shadow-sm" 
                        title="转存到网盘">
                    <i class="fa-solid fa-cloud-arrow-up"></i>
                </button>
            </div>
    
            <div v-if="isOpen" class="pl-4 md:pl-6 border-l border-gray-200 dark:border-gray-700 ml-3">
                <div v-if="loading" class="py-2 text-xs text-gray-500 flex items-center">
                    <i class="fa-solid fa-spinner fa-spin mr-2"></i> 加载中...
                </div>
                <template v-else>
                    <tree-node v-for="child in children" 
                        :key="child.id" 
                        :item="child" 
                        :share-link="shareLink"
                        :password="password"
                        :folder-name-template="folderNameTemplate"  @notify="$emit('notify', $event)"
                    ></tree-node>
                </template>
            </div>
        </div>
    </script>

    <template id="resource-panel-template">
        <div class="bg-gray-100 dark:bg-gray-800/50 rounded-lg p-1">
            <div class="flex items-center p-1 mb-3 bg-gray-200 dark:bg-gray-800 rounded-full overflow-x-auto hide-scrollbar w-fit max-w-full"
                 v-if="mediaType !== 'tv_episode' && tabs.length > 0">
                <button v-for="tab in tabs" :key="tab.id" @click="activeTab = tab.id" 
                    class="px-4 py-1.5 text-xs font-bold rounded-full transition-all duration-300 whitespace-nowrap flex-shrink-0"
                    :class="activeTab === tab.id ? 'bg-white dark:bg-gray-600 text-black dark:text-white shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                    <i :class="tab.icon" class="mr-1"></i> {{ tab.label }}
                </button>
            </div>
    
            <div class="relative min-h-[100px] max-h-[300px] overflow-y-auto custom-scrollbar p-2 transition-all duration-300"
                 :class="{ 'blur-sm opacity-60 pointer-events-none': loading }">
                
                <div v-if="mediaType !== 'tv_episode' && tabs.length === 0 && !loading" class="text-center py-6 text-gray-500">
                    <i class="fa-solid fa-ban text-2xl mb-2 opacity-50"></i><p class="text-xs">暂无可用资源</p>
                </div>
    
                <div v-else-if="displayResources.length === 0 && !loading" class="text-center py-6 text-xs text-gray-500">
                    该类型下暂无数据
                </div>
    
                <div v-else class="space-y-2">
                    <template v-if="activeTab === '115_share'">
                        <div v-for="(res, idx) in displayResources" :key="idx" class="rounded overflow-hidden mb-2">
                            <tree-node 
                                :item="{ 
                                    name: res.title, 
                                    is_dir: true, 
                                    id: '0', 
                                    size: res.size,
                                    extraTags: [res.resolution, res.has_chinese_subtitle?'中字':null, res.season_tag].filter(Boolean)
                                }"
                                :share-link="res.link"
                                :is-root="true" 
                                :folder-name-template="isoFolderName"  @notify="$emit('notify', $event)"
                            ></tree-node>
                        </div>
                    </template>
                    
                    <template v-else>
                        <div v-for="(res, idx) in displayResources" :key="idx" 
                             class="p-3 rounded transition flex flex-col sm:flex-row gap-2 sm:items-center"
                             :class="isIso(res) ? 'iso-black-gold' : 'bg-white dark:bg-gray-700/50 hover:bg-gray-50 dark:hover:bg-gray-700'">
                            
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center mb-1">
                                    <span v-if="mediaType === 'tv_episode'" class="text-[10px] px-1.5 py-0.5 rounded mr-2 flex-shrink-0 font-bold"
                                        :class="res.link_type === 'magnet' ? 'bg-red-500/10 text-red-500' : 'bg-blue-500/10 text-blue-500'">
                                        {{ res.link_type === 'magnet' ? 'MAG' : 'ED2K' }}
                                    </span>
    
                                    <span class="text-sm font-medium truncate" 
                                          :class="isIso(res) ? 'iso-text-gold' : 'text-gray-800 dark:text-gray-200'" 
                                          :title="res.title">{{ res.title }}</span>
                                </div>
                                
                                <div class="flex flex-wrap gap-1.5 mt-1 opacity-90">
                                    <span v-if="res.season_tag" class="text-[10px] px-1.5 py-0.5 rounded bg-emby-green/10 text-emby-green border border-emby-green/30 font-medium">
                                        {{ res.season_tag }}
                                    </span>
    
                                    <span v-if="res.size" class="text-[10px] px-1.5 py-0.5 rounded"
                                        :class="isIso(res) ? 'bg-white/10 text-gray-300 border border-white/20' : 'bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300'">
                                        {{ res.size }}
                                    </span>
                                    <span v-if="res.resolution" class="text-[10px] px-1.5 py-0.5 rounded border"
                                        :class="isIso(res) ? 'bg-blue-900/30 text-blue-300 border-blue-500/50' : 'bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 border-blue-200 dark:border-blue-800'">
                                        {{ res.resolution }}
                                    </span>
                                     <span v-if="res.quality" class="text-[10px] px-1.5 py-0.5 rounded"
                                         :class="isIso(res) ? 'bg-purple-900/50 text-purple-200' : 'bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300'">
                                        {{ res.quality }}
                                    </span>
                                </div>
                            </div>
    
                            <div class="flex-shrink-0 ml-auto flex items-center space-x-2">
                                 <button @click="addOfflineTask(res.link)" 
                                        class="p-2 rounded-full text-gray-400 hover:text-white hover:bg-emby-green transition shadow-sm"
                                        title="离线下载">
                                    <i class="fa-solid fa-cloud-download-alt"></i>
                                </button>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
    
            <div v-if="loading" class="absolute inset-0 z-10 flex items-center justify-center pointer-events-none">
                 <i class="fa-solid fa-spinner fa-spin text-2xl text-emby-accent"></i>
            </div>
        </div>
    </template>

    <div id="app" v-cloak class="min-h-screen flex flex-col relative overflow-x-hidden">

        <div v-if="isNavigating" class="fixed inset-0 z-[200] bg-white/20 dark:bg-black/20 backdrop-blur-lg flex items-center justify-center transition-all duration-500 animate-fade-in">
            <div class="text-center">
                <i class="fa-solid fa-circle-notch fa-spin text-5xl text-emby-accent drop-shadow-lg mb-4"></i>
                <p class="text-white font-bold text-lg drop-shadow-md tracking-widest animate-pulse">LOADING</p>
            </div>
        </div>

        <div class="fixed top-20 right-5 z-[100] space-y-3 w-80 pointer-events-none">
            <div v-for="toast in toasts" :key="toast.id" 
                 class="flex items-start p-4 rounded-lg shadow-lg text-white transform transition-all duration-300 pointer-events-auto backdrop-blur-md"
                 :class="toast.type === 'success' ? 'bg-emby-green/90' : 'bg-red-500/90'">
                <i class="fa-solid mt-1 mr-3" :class="toast.type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'"></i>
                <div class="flex-1 text-sm break-words font-medium">{{ toast.message }}</div>
                <button @click="removeToast(toast.id)" class="ml-2 hover:text-gray-200"><i class="fa-solid fa-times"></i></button>
            </div>
        </div>

        <nav class="sticky top-0 z-50 bg-white/90 dark:bg-black/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center cursor-pointer" @click="goHome">
                        <i class="fa-solid fa-play-circle text-3xl text-emby-accent mr-2"></i>
                        <span class="font-bold text-xl tracking-wide">Fullbr<span class="text-emby-green">115</span></span>
                    </div>
                    
                    <div class="hidden md:flex flex-1 max-w-lg mx-8">
                        <div class="relative w-full group">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                <i class="fa-solid fa-search text-gray-400"></i>
                            </span>
                            <input type="text" v-model="searchQuery" @keyup.enter="performSearch"
                                @focus="showSearchTrending = true" 
                                @blur="handleSearchBlur"
                                class="w-full bg-gray-100 dark:bg-gray-800 rounded-full py-2 pl-10 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-emby-accent transition"
                                placeholder="搜索电影、剧集...">
                            
                            <div v-if="showSearchTrending && !searchQuery && trendingList.length > 0" 
                                class="absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden z-[60] animate-fade-in">
                                <div class="p-3 border-b border-gray-100 dark:border-gray-700">
                                    <h3 class="text-sm font-bold flex items-center text-gray-700 dark:text-gray-200">
                                        <i class="fa-solid fa-arrow-trend-up text-red-500 mr-2"></i> 趋势
                                    </h3>
                                </div>
                                <div class="max-h-[60vh] overflow-y-auto custom-scrollbar py-1">
                                    <div v-for="(item, index) in trendingList.slice(0, 10)" :key="item.tmdb_id"
                                        @click="goToDetail(item.tmdb_id, item.media_type)"
                                        class="flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors group/item">
                                        
                                        <span class="w-6 text-center text-gray-400 group-hover/item:text-emby-accent mr-2 text-xs">
                                            <i class="fa-solid fa-magnifying-glass"></i>
                                        </span>
                                        
                                        <div class="flex-1 min-w-0">
                                            <div class="flex items-center text-sm font-medium text-gray-800 dark:text-gray-200 truncate">
                                                {{ item.title }}
                                                <span v-if="item.original_title && item.original_title !== item.title" 
                                                    class="ml-2 text-xs text-gray-400 truncate hidden sm:inline">
                                                    ({{ item.original_title }})
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center space-x-4">
                        <button class="md:hidden p-2" @click="showMobileSearch = !showMobileSearch">
                            <i class="fa-solid fa-search"></i>
                        </button>
                        <button @click="currentView = 'subscriptions'; refreshSubscriptions()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition" title="我的订阅">
                            <i class="fa-solid fa-bell text-emby-gold"></i>
                        </button>
                        <button @click="toggleTheme" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                            <i class="fa-solid" :class="isDark ? 'fa-sun text-yellow-400' : 'fa-moon text-gray-600'"></i>
                        </button>
                    </div>
                </div>
                
                <div v-if="showMobileSearch" class="md:hidden pb-4 relative">
                    <input type="text" v-model="searchQuery" @keyup.enter="performSearch"
                        @focus="showSearchTrending = true"
                        @blur="handleSearchBlur"
                        class="w-full bg-gray-100 dark:bg-gray-800 rounded-lg py-2 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-emby-accent"
                        placeholder="搜索...">
                        
                    <div v-if="showSearchTrending && !searchQuery && trendingList.length > 0" 
                        class="absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 z-[60] max-h-[50vh] overflow-y-auto">
                        <div class="p-3 border-b border-gray-100 dark:border-gray-700">
                            <h3 class="text-xs font-bold flex items-center text-gray-500">
                                <i class="fa-solid fa-arrow-trend-up mr-2"></i> 热门搜索
                            </h3>
                        </div>
                        <div v-for="item in trendingList.slice(0, 8)" :key="item.tmdb_id"
                            @click="goToDetail(item.tmdb_id, item.media_type)"
                            class="flex items-center px-4 py-3 border-b border-gray-50 dark:border-gray-700/50 last:border-0 active:bg-gray-100 dark:active:bg-gray-700">
                            <i class="fa-solid fa-search text-gray-300 mr-3 text-xs"></i>
                            <span class="text-sm truncate text-gray-700 dark:text-gray-200">{{ item.title }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <main class="flex-grow">
            <div v-if="currentView === 'subscriptions'" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <h2 class="text-2xl font-bold mb-6 flex items-center">
                    <i class="fa-solid fa-bell text-yellow-500 mr-3"></i>我的订阅
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div v-for="sub in subscriptionList" :key="sub.id" 
                         class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow flex space-x-4 relative overflow-hidden group border border-gray-200 dark:border-gray-700">
                        
                        <div class="w-20 h-28 flex-shrink-0 bg-gray-200">
                            <img :src="sub.poster_path" class="w-full h-full object-cover rounded shadow-sm">
                        </div>
                        
                        <div class="flex-1 min-w-0 flex flex-col justify-center">
                            <h3 class="font-bold truncate text-gray-900 dark:text-gray-100">{{ sub.title }}</h3>
                            <p class="text-xs text-gray-500 mt-1">
                                {{ sub.media_type === 'movie' ? '电影' : `S${sub.season_number} / 已更至 ${sub.current_episode}集` }}
                            </p>
                            
                            <div class="mt-2">
                                <span class="inline-block px-2 py-0.5 rounded text-[10px] font-medium" 
                                    :class="sub.status === 'completed' ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300' : 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300'">
                                    {{ sub.status === 'completed' ? '已完结' : '追更中' }}
                                </span>
                            </div>
                            
                            <p class="text-xs text-gray-400 mt-2 truncate" :title="sub.message">
                                <i class="fa-solid fa-clock-rotate-left mr-1"></i> {{ sub.message }}
                            </p>
                        </div>

                        <button @click="deleteSubscription(sub.id)" 
                                class="absolute top-2 right-2 p-2 text-gray-400 hover:text-red-500 transition opacity-0 group-hover:opacity-100"
                                title="取消订阅">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>
                </div>

                <div v-if="subscriptionList.length === 0" class="text-center py-20 text-gray-500">
                    <i class="fa-solid fa-bell-slash text-4xl mb-4 opacity-30"></i>
                    <p>暂无订阅，去发现页添加吧</p>
                </div>
            </div>

            <div v-if="currentView === 'home' || currentView === 'search'" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                
                <div v-if="currentView === 'home'" class="mb-8 space-y-4">
                    <div class="mb-4 animate-fade-in relative group/section">
                        <div class="flex items-center justify-between mb-4 px-1">
                            <h2 class="text-xl font-bold flex items-center">
                                <i class="fa-solid fa-fire text-red-500 mr-2"></i> 热门趋势
                            </h2>
                            
                            <div class="flex bg-gray-200 dark:bg-gray-800 rounded-full p-1 relative text-xs font-bold sm:text-sm shadow-inner">
                                <div class="absolute top-1 bottom-1 rounded-full bg-white text-black dark:bg-gray-600 dark:text-white shadow-sm transition-all duration-300 ease-out"
                                    :style="{ 
                                        left: trendingTimeWindow === 'day' ? '4px' : '50%', 
                                        width: 'calc(50% - 4px)' 
                                    }">
                                </div>
                                
                                <button @click="switchTrendingWindow('day')" 
                                        class="relative z-10 px-3 py-1 rounded-full transition-colors duration-300 w-16 sm:w-20 text-center"
                                        :class="trendingTimeWindow === 'day' ? 'text-black dark:text-white' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                                    今日
                                </button>
                                <button @click="switchTrendingWindow('week')" 
                                        class="relative z-10 px-3 py-1 rounded-full transition-colors duration-300 w-16 sm:w-20 text-center"
                                        :class="trendingTimeWindow === 'week' ? 'text-black dark:text-white' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                                    本周
                                </button>
                            </div>
                        </div>

                        <div class="flex overflow-x-auto snap-x snap-mandatory space-x-0 pb-4 hide-scrollbar hover-scrollbar scroll-smooth grab-cursor rounded-xl" 
                            ref="trendingContainer"
                            :class="{ 'grab-active': isDragging }"
                            @mousedown="startDrag"
                            @mousemove="onDrag"
                            @mouseup="stopDrag"
                            @mouseleave="stopDrag; resumeAutoPlay()"
                            @mouseenter="pauseAutoPlay">
                            
                            <div v-if="trendingLoading" v-for="i in 3" :key="i" class="w-full flex-shrink-0 snap-center px-1">
                                <div class="aspect-[4/3] sm:aspect-video md:aspect-[21/9] bg-gray-200 dark:bg-gray-800 rounded-xl animate-pulse"></div>
                            </div>

                            <div v-else v-for="item in trendingList" :key="item.tmdb_id" 
                                class="w-full flex-shrink-0 snap-center relative px-1 select-none"
                                @click="handleTrendClick($event, item.tmdb_id, item.media_type)">
                                
                                <div class="relative w-full aspect-[4/3] sm:aspect-video md:aspect-[21/9] rounded-xl overflow-hidden shadow-lg bg-gray-800 border border-gray-200 dark:border-gray-700">
                                    <img :src="item.backdrop_path || item.poster_path || 'https://via.placeholder.com/800x400?text=No+Image'" 
                                        class="w-full h-full object-cover pointer-events-none transition-transform duration-700 hover:scale-105" 
                                        loading="lazy">
                                    
                                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent flex items-end p-4 md:p-8">
                                        <div class="max-w-4xl w-full">
                                            <div class="flex flex-col md:flex-row md:items-end gap-2 md:gap-4 mb-2">
                                                <h3 class="text-xl md:text-3xl font-bold text-white leading-tight drop-shadow-md">
                                                    {{ item.title }}
                                                </h3>
                                                <div class="flex items-center gap-3">
                                                    <div class="flex items-center text-yellow-400 font-bold text-sm md:text-base">
                                                        <i class="fa-solid fa-star mr-1"></i>
                                                        {{ item.vote_average.toFixed(1) }}
                                                    </div>
                                                    <span class="px-1.5 py-0.5 rounded text-[10px] md:text-xs font-bold uppercase tracking-wider backdrop-blur-md border border-white/30 text-white"
                                                        :class="item.media_type === 'movie' ? 'bg-blue-500/50' : 'bg-purple-500/50'">
                                                        {{ item.media_type === 'movie' ? 'MOVIE' : 'TV' }}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="flex flex-wrap gap-2 mb-3 text-xs md:text-sm text-gray-300">
                                                 <span v-for="gName in getGenreNames(item.genre_ids)" :key="gName"
                                                       class="px-2 py-0.5 bg-white/10 rounded-full backdrop-blur-sm">
                                                     {{ gName }}
                                                 </span>
                                            </div>
                                            <p class="hidden md:block text-gray-200 text-sm line-clamp-2 max-w-2xl drop-shadow-sm leading-relaxed">
                                                {{ item.overview }}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-emby-card rounded-xl shadow-sm p-3 md:p-4 text-sm">
                        <div class="flex flex-col space-y-4">
                            <div class="flex flex-row items-center justify-between gap-2 md:gap-4">
                                
                                <div class="flex bg-gray-200 dark:bg-gray-800 rounded-full p-1 relative shadow-inner w-fit flex-shrink-0">
                                    <button v-for="type in ['movie', 'tv']" :key="type"
                                            @click="switchMediaType(type)"
                                            class="px-3 md:px-4 py-1.5 rounded-full transition-all duration-300 z-10 whitespace-nowrap text-xs font-bold flex items-center justify-center"
                                            :class="mediaType === type ? 'bg-white dark:bg-gray-600 text-black dark:text-white shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                                        <i class="md:hidden fa-solid" :class="type === 'movie' ? 'fa-film' : 'fa-tv'"></i>
                                        <span class="hidden md:inline">{{ type === 'movie' ? '电影' : '剧集' }}</span>
                                    </button>
                                </div>

                                <div class="flex items-center gap-2 md:gap-3 flex-shrink-0 overflow-x-auto hide-scrollbar">
                                    <div class="flex bg-gray-200 dark:bg-gray-800 rounded-full p-1 relative shadow-inner">
                                        <button v-for="opt in sortOptions" :key="opt.value"
                                                @click="filters.sortBy = opt.value; refreshData()"
                                                class="px-3 py-1.5 rounded-full transition-all duration-300 z-10 whitespace-nowrap text-xs font-bold flex items-center justify-center"
                                                :class="filters.sortBy === opt.value ? 'bg-white dark:bg-gray-600 text-black dark:text-white shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                                            <i class="md:hidden" :class="opt.icon"></i>
                                            <span class="hidden md:inline">{{ opt.label }}</span>
                                        </button>
                                    </div>
                                    
                                    <button @click="showAdvancedFilters = !showAdvancedFilters" 
                                            class="text-emby-accent text-sm hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-full transition-colors"
                                            :title="showAdvancedFilters ? '收起' : '更多筛选'">
                                        <i class="fa-solid" :class="showAdvancedFilters ? 'fa-chevron-up' : 'fa-sliders'"></i>
                                        <span class="hidden md:inline ml-1">{{ showAdvancedFilters ? '收起' : '更多' }}</span>
                                    </button>
                                </div>
                            </div>

                            <div v-show="showAdvancedFilters" class="pt-2 border-t border-gray-200 dark:border-gray-700 space-y-4 animate-fade-in">
                                <div>
                                    <span class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">年份</span>
                                    <div class="flex overflow-x-auto space-x-2 hide-scrollbar pb-1">
                                        <button v-for="range in dateRanges" :key="range.label"
                                            @click="toggleDateRange(range)"
                                            class="px-3 py-1 rounded-full text-xs transition border whitespace-nowrap flex-shrink-0"
                                            :class="filters.dateRange?.label === range.label ? 'bg-emby-accent text-white border-emby-accent' : 'bg-transparent border-gray-300 dark:border-gray-600 hover:border-emby-accent'">
                                            {{ range.label }}
                                        </button>
                                        <button @click="filters.dateRange = null; refreshData()" class="px-3 py-1 text-xs text-gray-500 hover:text-emby-accent whitespace-nowrap flex-shrink-0">
                                            清除
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <span class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">地区/语言</span>
                                    <div class="flex overflow-x-auto space-x-2 hide-scrollbar pb-1">
                                        <button v-for="lang in languageOptions" :key="lang.code"
                                            @click="toggleLanguage(lang.code)"
                                            class="px-3 py-1 rounded-full text-xs transition border whitespace-nowrap flex-shrink-0"
                                            :class="filters.originalLanguage === lang.code ? 'bg-emby-accent text-white border-emby-accent' : 'bg-transparent border-gray-300 dark:border-gray-600 hover:border-emby-accent'">
                                            {{ lang.label }}
                                        </button>
                                        <button @click="filters.originalLanguage = null; refreshData()" class="px-3 py-1 text-xs text-gray-500 hover:text-emby-accent whitespace-nowrap flex-shrink-0">
                                            清除
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <span class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">类型</span>
                                    <div class="flex overflow-x-auto space-x-2 hide-scrollbar pb-1">
                                        <button v-for="g in genres" :key="g.id"
                                            @click="toggleGenre(g.id)"
                                            class="px-3 py-1 rounded-full text-xs transition border whitespace-nowrap flex-shrink-0"
                                            :class="filters.selectedGenres.includes(g.id) ? 'bg-emby-green text-white border-emby-green' : 'bg-transparent border-gray-300 dark:border-gray-600 hover:border-emby-green'">
                                            {{ g.name }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="currentView === 'search'" class="mb-6 flex items-center justify-between">
                    <button @click="goHome" class="flex items-center text-gray-600 dark:text-gray-300 hover:text-emby-accent transition">
                        <i class="fa-solid fa-arrow-left mr-2"></i> 返回发现页
                    </button>
                    <div class="text-sm text-gray-500">搜索结果: "{{ searchQuery }}"</div>
                </div>

                <div v-if="loading && mediaList.length === 0" class="flex justify-center py-20">
                    <i class="fa-solid fa-circle-notch fa-spin text-4xl text-emby-accent"></i>
                </div>

                <div v-else-if="mediaList.length === 0 && !loading" class="text-center py-20 text-gray-500">
                    <i class="fa-solid fa-film text-6xl mb-4 opacity-30"></i>
                    <p>没有找到相关内容</p>
                </div>

                <div v-show="mediaList.length > 0">
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 sm:gap-6">
                        <div v-for="item in mediaList" :key="item.tmdb_id" 
                            class="group relative cursor-pointer flex flex-col transition-transform duration-300 hover:scale-105"
                            @click="goToDetail(item.tmdb_id, item.media_type)">
                            
                            <div class="relative w-full aspect-[2/3] rounded-lg overflow-hidden shadow-lg bg-gray-200 dark:bg-gray-800">
                                <img :src="item.poster_path || 'https://via.placeholder.com/300x450?text=No+Image'" 
                                    class="w-full h-full object-cover transition duration-500 group-hover:brightness-110"
                                    loading="lazy">
                                <div class="absolute top-2 right-2 bg-black/70 text-white text-xs font-bold px-1.5 py-0.5 rounded backdrop-blur-sm">
                                    {{ item.vote_average.toFixed(1) }}
                                </div>
                            </div>

                            <div class="mt-2 px-1">
                                <h3 class="text-sm font-bold truncate text-gray-800 dark:text-gray-100 group-hover:text-emby-accent transition-colors">
                                    {{ item.title }}
                                </h3>
                                <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">
                                    {{ item.release_date ? item.release_date.split('-')[0] : '' }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ref="loadTrigger" class="py-8 w-full flex justify-center items-center min-h-[60px]">
                        <div v-if="loading" class="flex items-center space-x-2 text-gray-500 dark:text-gray-400">
                            <i class="fa-solid fa-circle-notch fa-spin"></i>
                            <span class="text-sm">正在加载更多...</span>
                        </div>
                        <div v-else-if="!hasMore" class="text-xs text-gray-400 dark:text-gray-600 flex items-center">
                            <span class="w-12 h-[1px] bg-gray-300 dark:bg-gray-700 mx-2"></span>
                            我是有底线的
                            <span class="w-12 h-[1px] bg-gray-300 dark:bg-gray-700 mx-2"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="currentView === 'detail' && detailData" class="relative min-h-[calc(100vh-64px)] pb-20 animate-fade-in">
                <div class="absolute inset-0 z-0 overflow-hidden h-[70vh]">
                    <img :src="detailData.backdrop_path || detailData.poster_path" 
                         class="w-full h-full object-cover blur-md opacity-30 dark:opacity-20">
                    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-gray-100/60 to-gray-100 dark:via-emby-dark/80 dark:to-emby-dark"></div>
                </div>

                <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <button @click="goBack" class="mb-6 flex items-center text-gray-600 dark:text-gray-300 hover:text-emby-accent transition">
                        <i class="fa-solid fa-arrow-left mr-2"></i> 返回
                    </button>

                    <div class="flex flex-col md:flex-row gap-8 mb-10">
                        <div class="flex-shrink-0 w-48 md:w-64 mx-auto md:mx-0 flip-card self-start cursor-pointer group"
                             @click="togglePosterFlip">
                             
                            <div class="flip-card-inner aspect-[2/3] rounded-lg shadow-2xl border border-white/10"
                                 :style="{ transform: isPosterFlipped ? 'rotateY(180deg)' : '' }">
                                
                                <div class="flip-card-front bg-gray-200 dark:bg-gray-800">
                                    <img :src="currentSeasonData?.poster_path || detailData.poster_path" 
                                        class="w-full h-full object-cover">
                                    
                                    </div>
                                
                                <div class="flip-card-back bg-gray-200 dark:bg-gray-800">
                                    <img :src="detailData.poster_path" 
                                        class="w-full h-full object-cover">
                                </div>
                            </div>
                        </div>

                        <div class="flex-1 text-center md:text-left space-y-4">
                            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white">{{ detailData.title }}
                                <button @click.stop="toggleSubscribe" 
                                        class="focus:outline-none transition-transform hover:scale-110 active:scale-95" 
                                        :title="isSubscribed ? '取消订阅' : '订阅追更'">
                                    <i class="text-2xl" 
                                    :class="isSubscribed ? 'fa-solid fa-bell text-yellow-500' : 'fa-regular fa-bell text-gray-400 dark:text-gray-500 hover:text-yellow-500'">
                                    </i>
                                </button>
                            </h1>
                            <p class="text-lg text-gray-500 font-serif italic">{{ detailData.original_title }}</p>
                            <div class="flex flex-wrap items-center justify-center md:justify-start gap-3 text-sm">
                                <span class="bg-emby-accent text-white px-2 py-0.5 rounded font-bold">TMDB {{ detailData.vote_average.toFixed(1) }}</span>
                                <span class="text-gray-600 dark:text-gray-300">{{ detailData.release_date }}</span>
                                <span v-if="detailData.status" class="px-2 py-0.5 border border-gray-400 rounded text-xs">{{ detailData.status }}</span>
                            </div>

                            <p class="text-gray-700 dark:text-gray-300 leading-relaxed line-clamp-4">{{ detailData.overview }}</p>
                            
                            <div class="flex flex-wrap gap-2 justify-center md:justify-start pt-2">
                                <span v-for="g in detailData.genres" :key="g.id" class="px-2 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs">
                                    {{ g.name }}
                                </span>
                            </div>

                            <div class="mb-6 animate-slide-up" v-if="(detailData.directors && detailData.directors.length) || (detailData.cast && detailData.cast.length)">
                               
                                <div class="flex gap-3 px-1 pb-2 overflow-x-auto md:flex-wrap md:overflow-visible hide-scrollbar hover-scrollbar">
                                    
                                    <template v-for="person in detailData.directors" :key="'dir'+person.id">
                                        <a v-if="person.profile_path" 
                                        :href="'https://www.themoviedb.org/person/' + person.id" 
                                        target="_blank"
                                        class="flex-shrink-0 w-14 md:w-16 text-center group cursor-pointer block"
                                        title="点击查看导演详情">
                                            
                                            <div class="w-12 h-12 md:w-14 md:h-14 mx-auto rounded-full overflow-hidden shadow-sm mb-1 border border-transparent group-hover:border-emby-accent transition-colors bg-gray-200 dark:bg-gray-700 relative z-0">
                                                <img :src="person.profile_path" 
                                                    class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-125" 
                                                    loading="lazy">
                                            </div>
                                            <p class="text-[10px] md:text-s truncate text-gray-900 dark:text-gray-200 leading-tight group-hover:text-emby-accent transition-colors" :title="person.name">{{ person.name }}</p>
                                            <p class="text-[9px] md:text-[10px] text-emby-accent/80 truncate scale-90 origin-top">导演</p>
                                        </a>
                                    </template>

                                    <template v-for="person in detailData.cast" :key="'act'+person.id">
                                        <a v-if="person.profile_path" 
                                        :href="'https://www.themoviedb.org/person/' + person.id" 
                                        target="_blank"
                                        class="flex-shrink-0 w-14 md:w-16 text-center group cursor-pointer block"
                                        title="点击查看演员详情">
                                            
                                            <div class="w-12 h-12 md:w-14 md:h-14 mx-auto rounded-full overflow-hidden shadow-sm mb-1 border border-transparent group-hover:border-emby-accent transition-colors bg-gray-200 dark:bg-gray-700 relative z-0">
                                                <img :src="person.profile_path" 
                                                    class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-125" 
                                                    loading="lazy">
                                            </div>
                                            <p class="text-[10px] md:text-s truncate text-gray-900 dark:text-gray-200 leading-tight group-hover:text-emby-accent transition-colors" :title="person.name">{{ person.name }}</p>
                                            <p class="text-[9px] md:text-[10px] text-gray-500 truncate scale-90 origin-top" :title="person.character">{{ person.character }}</p>
                                        </a>
                                    </template>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="mb-10 animate-slide-up" v-if="detailData.media_type === 'movie' || detailData.media_type === 'tv'">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fa-solid fa-layer-group text-emby-accent mr-2"></i>
                            {{ detailData.media_type === 'movie' ? '电影资源' : '全集/打包资源' }}
                        </h2>
                        
                        <resource-panel 
                            :tmdb-id="detailData.tmdb_id" 
                            :media-type="detailData.media_type" 
                            :availability="detailData.availability"
                            :injected-115="detailData.media_type === 'tv' ? fullSeries115 : null"
                            :media-info="{ title: detailData.title, date: detailData.release_date, tmdb_id: detailData.tmdb_id }"
                            context="main"
                            @notify="showToast"
                        ></resource-panel>
                    </div>

                    <div v-if="detailData.media_type === 'tv' && detailData.seasons.length > 0" class="mb-10 animate-slide-up">
                        <h2 class="text-xl font-bold mb-6 px-2 border-l-4 border-emby-accent">分季详情</h2>
                        
                        <div ref="seasonTabsContainer" class="flex overflow-x-auto space-x-4 pb-4 mb-4 hide-scrollbar scroll-smooth">
                            <button v-for="season in detailData.seasons" :key="season.id"
                                :ref="el => seasonTabsRefs[season.season_number] = el"
                                @click="selectSeason(season)"
                                class="flex-shrink-0 px-4 py-2 rounded-lg transition text-sm font-bold whitespace-nowrap"
                                :class="selectedSeasonNumber === season.season_number 
                                    ? 'bg-emby-accent text-white shadow-lg scale-105' 
                                    : 'bg-gray-200 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-700'">
                                {{ season.name }}
                            </button>
                        </div>

                        <div v-if="currentSeasonData" class="animate-fade-in">
                             <div class="mb-6">
                                <h4 class="text-sm font-bold text-gray-500 mb-2 uppercase tracking-wider">本季资源 (Season Pack)</h4>
                                <resource-panel 
                                    :tmdb-id="detailData.tmdb_id" 
                                    :season-number="currentSeasonData.season_number"
                                    media-type="tv_season"
                                    :availability="currentSeasonData.availability"
                                    :injected-115="getCurrentSeason115(currentSeasonData.season_number)"
                                    context="season"
                                    @notify="showToast"
                                ></resource-panel>
                            </div>

                            <div class="mb-4 text-sm text-gray-500 dark:text-gray-400 flex items-center">
                                <span>{{ currentSeasonData.air_date }}</span>
                                <span class="mx-2">|</span>
                                <span>共 {{ currentSeasonData.episode_count }} 集</span>
                            </div>

                            <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-3">
                                <div v-for="ep in currentSeasonData.episodes" :key="ep.id"
                                    @click="openEpisodeModal(currentSeasonData.season_number, ep)"
                                    class="cursor-pointer group flex bg-white/50 dark:bg-gray-800/50 rounded-lg p-3 hover:bg-white dark:hover:bg-gray-800 transition shadow-sm border border-transparent hover:border-emby-accent/50">
                                    <div class="w-32 flex-shrink-0 mr-4 relative rounded overflow-hidden aspect-video bg-gray-900">
                                        <img :src="ep.still_path || detailData.backdrop_path" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                                        <div class="absolute bottom-1 right-1 bg-black/60 text-white text-[10px] px-1 rounded">
                                            {{ ep.vote_average.toFixed(1) }}
                                        </div>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex justify-between items-start">
                                            <h4 class="font-bold text-sm truncate pr-2 group-hover:text-emby-accent">
                                                {{ ep.episode_number }}. {{ ep.name }}
                                            </h4>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">{{ ep.air_date }}</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400 mt-2 line-clamp-2">
                                            {{ ep.overview || '暂无简介' }}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div v-else class="py-10 text-center">
                            <i class="fa-solid fa-spinner fa-spin text-2xl text-emby-accent"></i> 
                            <span class="ml-2 text-sm text-gray-500">加载季信息...</span>
                        </div>
                    </div>

                     <div class="mt-16 border-t border-gray-200 dark:border-gray-800 pt-8" v-if="detailData.recommendations && detailData.recommendations.length">
                        <h2 class="text-xl font-bold mb-6">相关推荐</h2>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-4">
                            <div v-for="rec in detailData.recommendations" :key="rec.tmdb_id"
                                @click="goToDetail(rec.tmdb_id, rec.media_type)"
                                class="cursor-pointer group">
                                <div class="aspect-[2/3] rounded bg-gray-800 overflow-hidden mb-2 relative">
                                    <img :src="rec.poster_path || 'https://via.placeholder.com/300x450'" class="w-full h-full object-cover group-hover:scale-110 transition duration-300">
                                    <div class="absolute top-1 right-1 bg-black/60 text-white text-[10px] px-1 rounded">{{ rec.vote_average.toFixed(1) }}</div>
                                </div>
                                <p class="text-xs text-center truncate group-hover:text-emby-accent transition-colors">{{ rec.title }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="showEpisodeModal" class="fixed inset-0 z-[100] flex items-center justify-center p-4">
                <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" @click="closeEpisodeModal"></div>
                <div class="relative bg-white dark:bg-emby-card w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden animate-slide-up flex flex-col max-h-[80vh]">
                    
                    <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800">
                        <div>
                            <h3 class="text-lg font-bold">
                                S{{ currentEpisode.season_number }} E{{ currentEpisode.episode_number }} - {{ currentEpisode.name }}
                            </h3>
                            <p class="text-xs text-gray-500">{{ currentEpisode.air_date }}</p>
                        </div>
                        <button @click="closeEpisodeModal" class="text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                    </div>

                    <div class="p-0 overflow-y-auto custom-scrollbar flex-1">
                        <div class="p-4 bg-gray-100 dark:bg-black/20 text-sm text-gray-600 dark:text-gray-300 mb-4" v-if="currentEpisode.overview">
                            {{ currentEpisode.overview }}
                        </div>

                        <div class="px-4 pb-6">
                            <h4 class="text-sm font-bold text-gray-500 mb-3 uppercase tracking-wider">单集资源</h4>
                            <resource-panel 
                                :tmdb-id="detailData.tmdb_id" 
                                :season-number="currentEpisode.season_number"
                                :episode-number="currentEpisode.episode_number"
                                media-type="tv_episode"
                                :availability="currentEpisode.availability"
                                context="episode"
                                @notify="showToast"
                            ></resource-panel>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="showSubscribeModal" class="fixed inset-0 z-[110] flex items-center justify-center p-4">
                <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" @click="showSubscribeModal = false"></div>
                <div class="relative bg-white dark:bg-gray-800 w-full max-w-md rounded-xl shadow-2xl p-6 animate-slide-up">
                    <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">订阅设置</h3>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1 text-gray-500">资源名称</label>
                        <div class="text-gray-900 dark:text-gray-100 font-medium">{{ detailData.title }}</div>
                    </div>

                    <div v-if="detailData.media_type === 'tv'" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1 text-gray-500">选择季度</label>
                            <select v-model="subForm.season_number" class="w-full bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded p-2 border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-yellow-500 outline-none">
                                <option v-for="s in detailData.seasons.filter(x=>x.season_number>0)" :key="s.id" :value="s.season_number">
                                    {{ s.name }} (共{{ s.episode_count }}集)
                                </option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1 text-gray-500">起始集数 (当前看到第几集?)</label>
                            <input type="number" v-model.number="subForm.start_episode" min="1" 
                                class="w-full bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded p-2 border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-yellow-500 outline-none">
                            <p class="text-xs text-gray-500 mt-1">
                                例如：如果你想从第 1 集开始下载，填 1。<br>
                                如果你已经看完了第 5 集，想从第 6 集开始下，填 6。
                            </p>
                        </div>
                    </div>
                    
                    <div v-else class="text-sm text-gray-500 mb-6">
                        电影订阅将持续监控，直到资源可用并自动下载。
                    </div>

                    <div class="mt-6 flex justify-end space-x-3">
                        <button @click="showSubscribeModal = false" class="px-4 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">取消</button>
                        <button @click="submitSubscription" class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 transition shadow-lg">
                            确认订阅
                        </button>
                    </div>
                </div>
            </div>

        </main>
        <transition enter-active-class="transition ease-out duration-300" enter-from-class="opacity-0 translate-y-10" enter-to-class="opacity-100 translate-y-0" leave-active-class="transition ease-in duration-300" leave-from-class="opacity-100 translate-y-0" leave-to-class="opacity-0 translate-y-10">
            <button v-show="showBackToTop" @click="scrollToTop"
                    class="fixed bottom-24 right-0 z-[90] flex items-center justify-start pl-4 pr-6 py-3 
                           bg-gray-800/90 dark:bg-gray-700/90 text-white rounded-l-full shadow-2xl backdrop-blur-md 
                           transition-all duration-300 transform translate-x-[65%] hover:translate-x-0 
                           hover:bg-emby-green group cursor-pointer border border-r-0 border-gray-600/30">
                <i class="fa-solid fa-arrow-up text-lg group-hover:-translate-y-1 transition-transform duration-300 mr-3"></i>
                <span class="font-bold text-sm tracking-wider whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-75">
                    TOP
                </span>
            </button>
        </transition>
    </div>

    <script src="/static/app.js" defer></script>
</body>
</html>